class Album{static URL="https://jsonplaceholder.typicode.com/photos?albumId=";static request(t="",e="GET",s){return fetch(Album.URL+t,{method:e,body:s?JSON.stringify(s):void 0,headers:{"Content-type":"application/json"}}).catch(t=>{throw new Error(""+t.message)})}static getImgByAlbumID(t){return Album.request(t).then(t=>{if(t.ok)return t.json();throw new Error("Can't get images.")})}}class Albums{static URL="https://jsonplaceholder.typicode.com/albums";static request(t="",e="GET",s){return fetch(Albums.URL+t,{method:e,body:s?JSON.stringify(s):void 0,headers:{"Content-type":"application/json"}}).catch(t=>{throw new Error(""+t.message)})}static getList(){return Albums.request().then(t=>{if(t.ok)return t.json();throw new Error("Can't get the list of albums.")})}}class LinksCollection{#list;fetch(){return Albums.getList().then(t=>{this.setList(t)})}setList(t){this.#list=t}getList(){return this.#list}getFirstId(){return this.#list[0].id}}class AlbumsCollection{#collection=[];fetch(t){return Album.getImgByAlbumID(t).then(t=>{this.setList(t)})}setList(t){this.#collection=t}getList(){return this.#collection}}class LinksView{static ALBUMS_LIST_SELECTOR="#linksList";static ALBUMS_ITEM_SELECTOR=".links_container__item";#$list;#options;constructor(t){this.#$list=$(LinksView.ALBUMS_LIST_SELECTOR).on("click",LinksView.ALBUMS_ITEM_SELECTOR,t=>this.onAlbumsListClick(t)),this.#options=t}onAlbumsListClick(t){t.preventDefault();t=this.getAlbumId(t.target);this.#options.onSelect(t)}renderAlbumsList(t){t=t.map(t=>this.generateHtmlLinks(t)).join("");this.#$list.html(t)}appendTo(t){t.append(this.#$list)}getAlbumId(t){return t.closest(LinksView.ALBUMS_ITEM_SELECTOR)?.dataset.id}generateHtmlLinks(t){return` 
        <li class="links_container__item" data-id="${t.id}">
            <a class="links_container__link" href="https://jsonplaceholder.typicode.com/photos?albumId=${t.userId}">${t.title}</a>
        </li>
    `}}class AlbumsView{static IMAGES_CONTAINER_SELECTOR="#imgContainer";#$gallery;#options;constructor(t){this.#$gallery=$(AlbumsView.IMAGES_CONTAINER_SELECTOR),this.#options=t}appendTo(t){t.append(this.#$gallery)}renderImgList(t){this.#$gallery.innerHTML="";t=t.map(t=>this.generateImages(t)).join("");this.#$gallery.html(t)}generateImages(t){return`
    <li class="img_container__item">
        <img src="${t.url}" alt="${t.id}">
    </li>
    `}}class LinksController{#$rootContainer;#albumsController;constructor(t,e){this.#$rootContainer=t,this.#albumsController=e,this.collection=new LinksCollection,this.linksView=new LinksView({onSelect:t=>e.loadAlbumById(t)}),this.linksView.appendTo(this.#$rootContainer),this.collection.fetch().then(()=>this.renderList()).then(()=>this.loadFirstAlbum())}renderList(){this.linksView.renderAlbumsList(this.collection.getList())}loadFirstAlbum(){var t=this.collection.getFirstId();this.#albumsController.loadAlbumById(t)}}class AlbumsController{#$rootAlbumContainer;constructor(t){this.#$rootAlbumContainer=t,this.collection=new AlbumsCollection,this.albumView=new AlbumsView,this.albumView.appendTo(this.#$rootAlbumContainer)}renderList(){this.albumView.renderImgList(this.collection.getList())}loadAlbumById(t){this.collection.fetch(t).then(()=>this.renderList())}}let albumsController=new AlbumsController($("#imgContainer"));new LinksController($("#linksList"),albumsController);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkFsYnVtLmpzIiwiQWxidW1zLmpzIiwiTGlua3NDb2xsZWN0aW9uLmpzIiwiQWxidW1zQ29sbGVjdGlvbi5qcyIsIkxpbmtzVmlldy5qcyIsIkFsYnVtc1ZpZXcuanMiLCJMaW5rc0NvbnRyb2xsZXIuanMiLCJBbGJ1bXNDb250cm9sbGVyLmpzIl0sIm5hbWVzIjpbIkFsYnVtIiwiVVJMIiwicmVxdWVzdCIsInVybCIsIm1ldGhvZCIsImJvZHkiLCJmZXRjaCIsIkpTT04iLCJzdHJpbmdpZnkiLCJ1bmRlZmluZWQiLCJoZWFkZXJzIiwiQ29udGVudC10eXBlIiwiY2F0Y2giLCJFcnJvciIsImUiLCJtZXNzYWdlIiwiZ2V0SW1nQnlBbGJ1bUlEIiwiaWQiLCJ0aGVuIiwicmVzIiwib2siLCJqc29uIiwiQWxidW1zIiwiZ2V0TGlzdCIsIkxpbmtzQ29sbGVjdGlvbiIsIiNsaXN0IiwidGhpcyIsInNldExpc3QiLCJsaXN0IiwiZ2V0Rmlyc3RJZCIsIkFsYnVtc0NvbGxlY3Rpb24iLCIjY29sbGVjdGlvbiIsImNvbGxlY3Rpb24iLCJMaW5rc1ZpZXciLCJBTEJVTVNfTElTVF9TRUxFQ1RPUiIsIkFMQlVNU19JVEVNX1NFTEVDVE9SIiwiIyRsaXN0IiwiI29wdGlvbnMiLCJjb25zdHJ1Y3RvciIsIm9wdGlvbnMiLCIkIiwib24iLCJvbkFsYnVtc0xpc3RDbGljayIsInByZXZlbnREZWZhdWx0IiwiZ2V0QWxidW1JZCIsInRhcmdldCIsIm9uU2VsZWN0IiwicmVuZGVyQWxidW1zTGlzdCIsImh0bWwiLCJtYXAiLCJnZW5lcmF0ZUh0bWxMaW5rcyIsImpvaW4iLCJhcHBlbmRUbyIsIiRlbCIsImFwcGVuZCIsImVsIiwiY2xvc2VzdCIsImRhdGFzZXQiLCJsaW5rIiwidXNlcklkIiwidGl0bGUiLCJBbGJ1bXNWaWV3IiwiSU1BR0VTX0NPTlRBSU5FUl9TRUxFQ1RPUiIsIiMkZ2FsbGVyeSIsInJlbmRlckltZ0xpc3QiLCJnYWxsZXJ5IiwiaW5uZXJIVE1MIiwiZ2VuZXJhdGVJbWFnZXMiLCJpbWciLCJMaW5rc0NvbnRyb2xsZXIiLCIjJHJvb3RDb250YWluZXIiLCIjYWxidW1zQ29udHJvbGxlciIsIiRjb250YWluZXIiLCJhbGJ1bXNDb250cm9sbGVyIiwibGlua3NWaWV3IiwibG9hZEFsYnVtQnlJZCIsInJlbmRlckxpc3QiLCJsb2FkRmlyc3RBbGJ1bSIsImZpcnN0QWxidW1JZCIsIkFsYnVtc0NvbnRyb2xsZXIiLCIjJHJvb3RBbGJ1bUNvbnRhaW5lciIsImFsYnVtQ29udGFpbmVyIiwiYWxidW1WaWV3IiwibGV0Il0sIm1hcHBpbmdzIjoiTUFBQUEsTUFFQUMsV0FBQSx1REFFQUMsZUFBQUMsRUFBQSxHQUFBQyxFQUFBLE1BQUFDLEdBQ0EsT0FBQUMsTUFBQU4sTUFBQUMsSUFBQUUsRUFBQSxDQUNBQyxPQUFBQSxFQUNBQyxLQUFBQSxFQUFBRSxLQUFBQyxVQUFBSCxDQUFBLEVBQUFJLEtBQUFBLEVBQ0FDLFFBQUEsQ0FDQUMsZUFBQSxrQkFDQSxDQUNBLENBQUEsRUFDQUMsTUFBQSxJQUNBLE1BQUEsSUFBQUMsTUFBQSxHQUFBQyxFQUFBQyxPQUFBLENBQ0EsQ0FBQSxDQUNBLENBRUFDLHVCQUFBQyxHQUNBLE9BQUFqQixNQUNBRSxRQUFBZSxDQUFBLEVBQ0FDLEtBQUFDLElBQ0EsR0FBQUEsRUFBQUMsR0FDQSxPQUFBRCxFQUFBRSxLQUFBLEVBRUEsTUFBQSxJQUFBUixNQUFBLG1CQUFBLENBQ0EsQ0FBQSxDQUNBLENBQ0EsT0MzQkFTLE9BRUFyQixXQUFBLDhDQUVBQyxlQUFBQyxFQUFBLEdBQUFDLEVBQUEsTUFBQUMsR0FDQSxPQUFBQyxNQUFBZ0IsT0FBQXJCLElBQUFFLEVBQUEsQ0FDQUMsT0FBQUEsRUFDQUMsS0FBQUEsRUFBQUUsS0FBQUMsVUFBQUgsQ0FBQSxFQUFBSSxLQUFBQSxFQUNBQyxRQUFBLENBQ0FDLGVBQUEsa0JBQ0EsQ0FDQSxDQUFBLEVBQ0FDLE1BQUEsSUFDQSxNQUFBLElBQUFDLE1BQUEsR0FBQUMsRUFBQUMsT0FBQSxDQUNBLENB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RCxhQUNBbEQsS0FBQWdELFVBQUEzQixpQkFBQXJCLEtBQUFNLFdBQUFULFFBQUEsQ0FBQSxDQUNBLENBRUFzRCxpQkFDQSxJQUFBQyxFQUFBcEQsS0FBQU0sV0FBQUgsV0FBQSxFQUNBSCxLQUFBNkMsa0JBQUFJLGNBQUFHLENBQUEsQ0FDQSxDQUNBLE9DMUJBQyxpQkFDQUMscUJBRUExQyxZQUFBMkMsR0FDQXZELEtBQUFzRCxxQkFBQUMsRUFDQXZELEtBQUFNLFdBQUEsSUFBQUYsaUJBQ0FKLEtBQUF3RCxVQUFBLElBQUFyQixXQUdBbkMsS0FBQXdELFVBQUE5QixTQUFBMUIsS0FBQXNELG9CQUFBLENBRUEsQ0FFQUosYUFDQWxELEtBQUF3RCxVQUFBbEIsY0FBQXRDLEtBQUFNLFdBQUFULFFBQUEsQ0FBQSxDQUNBLENBRUFvRCxjQUFBMUQsR0FDQVMsS0FBQU0sV0FBQTFCLE1BQUFXLENBQUEsRUFBQUMsS0FBQSxJQUFBUSxLQUFBa0QsV0FBQSxDQUFBLENBQ0EsQ0FDQSxDUHBCQU8sSUFBQVYsaUJBQUEsSUFBQU0saUJBQUF2QyxFQUFBLGVBQUEsQ0FBQSxFQUNBLElBQUE2QixnQkFBQTdCLEVBQUEsWUFBQSxFQUFBaUMsZ0JBQUEiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgQWxidW0ge1xuXG4gICAgc3RhdGljIFVSTCA9ICdodHRwczovL2pzb25wbGFjZWhvbGRlci50eXBpY29kZS5jb20vcGhvdG9zP2FsYnVtSWQ9JztcblxuICAgIHN0YXRpYyByZXF1ZXN0KHVybCA9ICcnLCBtZXRob2QgPSAnR0VUJywgYm9keSkge1xuICAgICAgICByZXR1cm4gZmV0Y2goQWxidW0uVVJMICsgdXJsLCB7XG4gICAgICAgICAgICBtZXRob2QsXG4gICAgICAgICAgICBib2R5OiBib2R5ID8gSlNPTi5zdHJpbmdpZnkoYm9keSkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goKGUpID0+IHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7ZS5tZXNzYWdlfWApO1xuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgc3RhdGljIGdldEltZ0J5QWxidW1JRChpZCkge1xuICAgICAgICByZXR1cm4gQWxidW1cbiAgICAgICAgICAgIC5yZXF1ZXN0KGlkKVxuICAgICAgICAgICAgLnRoZW4ocmVzID0+IHtcbiAgICAgICAgICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW4ndCBnZXQgaW1hZ2VzLlwiKTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cbn0iLCJjbGFzcyBBbGJ1bXN7XG5cbiAgICBzdGF0aWMgVVJMID0gJ2h0dHBzOi8vanNvbnBsYWNlaG9sZGVyLnR5cGljb2RlLmNvbS9hbGJ1bXMnO1xuXG4gICAgc3RhdGljIHJlcXVlc3QodXJsID0gJycsIG1ldGhvZCA9ICdHRVQnLCBib2R5KSB7XG4gICAgICAgIHJldHVybiBmZXRjaChBbGJ1bXMuVVJMICsgdXJsLCB7XG4gICAgICAgICAgICBtZXRob2QsXG4gICAgICAgICAgICBib2R5OiBib2R5ID8gSlNPTi5zdHJpbmdpZnkoYm9keSkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goKGUpID0+IHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7ZS5tZXNzYWdlfWApO1xuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgc3RhdGljIGdldExpc3QoKSB7XG4gICAgICAgIHJldHVybiBBbGJ1bXNcbiAgICAgICAgICAgIC5yZXF1ZXN0KClcbiAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2FuJ3QgZ2V0IHRoZSBsaXN0IG9mIGFsYnVtcy5cIik7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbn1cblxuIiwiY2xhc3MgTGlua3NDb2xsZWN0aW9uIHtcbiAgICAjbGlzdFxuXG4gICAgZmV0Y2goKSB7XG4gICAgICAgIHJldHVybiBBbGJ1bXMuZ2V0TGlzdCgpLnRoZW4oKGxpc3QpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc2V0TGlzdChsaXN0KTtcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBzZXRMaXN0KGxpc3QpIHtcbiAgICAgICAgdGhpcy4jbGlzdCA9IGxpc3Q7XG4gICAgfVxuXG4gICAgZ2V0TGlzdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2xpc3Q7XG4gICAgfVxuXG4gICAgZ2V0Rmlyc3RJZCgpe1xuICAgICAgICByZXR1cm4gdGhpcy4jbGlzdFswXS5pZFxuICAgIH1cbn1cbiIsImNsYXNzIEFsYnVtc0NvbGxlY3Rpb257XG4gICAgI2NvbGxlY3Rpb24gPSBbXTtcblxuICAgIGZldGNoKGlkKSB7XG4gICAgICAgIHJldHVybiBBbGJ1bVxuICAgICAgICAgICAgLmdldEltZ0J5QWxidW1JRChpZClcbiAgICAgICAgICAgIC50aGVuKChjb2xsZWN0aW9uKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnNldExpc3QoY29sbGVjdGlvbik7XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgc2V0TGlzdChjb2xsZWN0aW9uKSB7XG4gICAgICAgIHRoaXMuI2NvbGxlY3Rpb24gPSBjb2xsZWN0aW9uO1xuICAgIH1cblxuICAgIGdldExpc3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNjb2xsZWN0aW9uO1xuICAgIH1cbn0iLCJjbGFzcyBMaW5rc1ZpZXcge1xuICAgIHN0YXRpYyBBTEJVTVNfTElTVF9TRUxFQ1RPUiA9ICcjbGlua3NMaXN0JztcbiAgICBzdGF0aWMgQUxCVU1TX0lURU1fU0VMRUNUT1IgPSAnLmxpbmtzX2NvbnRhaW5lcl9faXRlbSdcblxuXG4gICAgIyRsaXN0O1xuICAgICNvcHRpb25zO1xuXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgICAgICB0aGlzLiMkbGlzdCA9ICQoTGlua3NWaWV3LkFMQlVNU19MSVNUX1NFTEVDVE9SKVxuICAgICAgICAgICAgLm9uKCdjbGljaycsIExpbmtzVmlldy5BTEJVTVNfSVRFTV9TRUxFQ1RPUiwgKGUpID0+IHRoaXMub25BbGJ1bXNMaXN0Q2xpY2soZSkpXG5cbiAgICAgICAgdGhpcy4jb3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgfVxuXG4gICAgb25BbGJ1bXNMaXN0Q2xpY2soZSl7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICBjb25zdCBpZCA9IHRoaXMuZ2V0QWxidW1JZChlLnRhcmdldCk7XG5cbiAgICAgICAgdGhpcy4jb3B0aW9ucy5vblNlbGVjdChpZCk7XG4gICAgfVxuXG4gICAgcmVuZGVyQWxidW1zTGlzdChsaXN0KSB7XG4gICAgICAgIGNvbnN0IGh0bWwgPSBsaXN0Lm1hcChsaXN0ID0+IHRoaXMuZ2VuZXJhdGVIdG1sTGlua3MobGlzdCkpLmpvaW4oJycpO1xuXG4gICAgICAgIHRoaXMuIyRsaXN0Lmh0bWwoaHRtbCk7XG4gICAgfVxuXG4gICAgYXBwZW5kVG8oJGVsKSB7XG4gICAgICAgICRlbC5hcHBlbmQodGhpcy4jJGxpc3QpO1xuICAgIH1cblxuICAgIGdldEFsYnVtSWQoZWwpIHtcbiAgICAgICAgcmV0dXJuIGVsLmNsb3Nlc3QoTGlua3NWaWV3LkFMQlVNU19JVEVNX1NFTEVDVE9SKT8uZGF0YXNldC5pZDtcbiAgICB9XG5cbiAgICBnZW5lcmF0ZUh0bWxMaW5rcyhsaW5rKXtcbiAgICAgICAgcmV0dXJuIGAgXG4gICAgICAgIDxsaSBjbGFzcz1cImxpbmtzX2NvbnRhaW5lcl9faXRlbVwiIGRhdGEtaWQ9XCIke2xpbmsuaWR9XCI+XG4gICAgICAgICAgICA8YSBjbGFzcz1cImxpbmtzX2NvbnRhaW5lcl9fbGlua1wiIGhyZWY9XCJodHRwczovL2pzb25wbGFjZWhvbGRlci50eXBpY29kZS5jb20vcGhvdG9zP2FsYnVtSWQ9JHtsaW5rLnVzZXJJZH1cIj4ke2xpbmsudGl0bGV9PC9hPlxuICAgICAgICA8L2xpPlxuICAgIGA7XG4gICAgfVxufSIsImNsYXNzIEFsYnVtc1ZpZXd7XG4gICAgc3RhdGljIElNQUdFU19DT05UQUlORVJfU0VMRUNUT1IgPSAnI2ltZ0NvbnRhaW5lcic7XG5cbiAgICAjJGdhbGxlcnlcbiAgICAjb3B0aW9ucztcblxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy4jJGdhbGxlcnkgPSAkKEFsYnVtc1ZpZXcuSU1BR0VTX0NPTlRBSU5FUl9TRUxFQ1RPUilcbiAgICAgICAgdGhpcy4jb3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgfVxuXG4gICAgYXBwZW5kVG8oJGVsKSB7XG4gICAgICAgICRlbC5hcHBlbmQodGhpcy4jJGdhbGxlcnkpO1xuICAgIH1cblxuICAgIHJlbmRlckltZ0xpc3QoZ2FsbGVyeSkge1xuICAgICAgICB0aGlzLiMkZ2FsbGVyeS5pbm5lckhUTUwgPSAnJztcblxuICAgICAgICBjb25zdCBodG1sID0gZ2FsbGVyeS5tYXAoZ2FsbGVyeSA9PiB0aGlzLmdlbmVyYXRlSW1hZ2VzKGdhbGxlcnkpKS5qb2luKCcnKTtcblxuICAgICAgICB0aGlzLiMkZ2FsbGVyeS5odG1sKGh0bWwpXG5cbiAgICB9XG5cbiAgICBnZW5lcmF0ZUltYWdlcyhpbWcpe1xuICAgICAgICByZXR1cm4gYFxuICAgIDxsaSBjbGFzcz1cImltZ19jb250YWluZXJfX2l0ZW1cIj5cbiAgICAgICAgPGltZyBzcmM9XCIke2ltZy51cmx9XCIgYWx0PVwiJHtpbWcuaWR9XCI+XG4gICAgPC9saT5cbiAgICBgXG4gICAgfVxufSIsImNsYXNzIExpbmtzQ29udHJvbGxlcntcbiAgICAjJHJvb3RDb250YWluZXI7XG4gICAgI2FsYnVtc0NvbnRyb2xsZXJcblxuICAgIGNvbnN0cnVjdG9yKCRjb250YWluZXIsIGFsYnVtc0NvbnRyb2xsZXIpIHtcbiAgICAgICAgdGhpcy4jJHJvb3RDb250YWluZXIgPSAkY29udGFpbmVyO1xuICAgICAgICB0aGlzLiNhbGJ1bXNDb250cm9sbGVyID0gYWxidW1zQ29udHJvbGxlcjtcbiAgICAgICAgdGhpcy5jb2xsZWN0aW9uID0gbmV3IExpbmtzQ29sbGVjdGlvbigpO1xuICAgICAgICB0aGlzLmxpbmtzVmlldyA9IG5ldyBMaW5rc1ZpZXcoe1xuICAgICAgICAgICAgICAgIG9uU2VsZWN0OiBpZCA9PiBhbGJ1bXNDb250cm9sbGVyLmxvYWRBbGJ1bUJ5SWQoaWQpXG4gICAgICAgIH0pXG5cbiAgICAgICAgdGhpcy5saW5rc1ZpZXcuYXBwZW5kVG8odGhpcy4jJHJvb3RDb250YWluZXIpO1xuICAgICAgICB0aGlzLmNvbGxlY3Rpb24uZmV0Y2goKVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4gdGhpcy5yZW5kZXJMaXN0KCkpXG4gICAgICAgICAgICAudGhlbigoKSA9PiB0aGlzLmxvYWRGaXJzdEFsYnVtKCkpXG4gICAgfVxuXG4gICAgcmVuZGVyTGlzdCgpIHtcbiAgICAgICAgdGhpcy5saW5rc1ZpZXcucmVuZGVyQWxidW1zTGlzdCh0aGlzLmNvbGxlY3Rpb24uZ2V0TGlzdCgpKTtcbiAgICB9XG5cbiAgICBsb2FkRmlyc3RBbGJ1bSgpe1xuICAgICAgIGNvbnN0IGZpcnN0QWxidW1JZCA9ICB0aGlzLmNvbGxlY3Rpb24uZ2V0Rmlyc3RJZCgpO1xuICAgICAgIHRoaXMuI2FsYnVtc0NvbnRyb2xsZXIubG9hZEFsYnVtQnlJZChmaXJzdEFsYnVtSWQpXG4gICAgfVxufVxuIiwiY2xhc3MgQWxidW1zQ29udHJvbGxlcntcbiAgICAjJHJvb3RBbGJ1bUNvbnRhaW5lclxuXG4gICAgY29uc3RydWN0b3IoYWxidW1Db250YWluZXIpIHtcbiAgICAgICAgdGhpcy4jJHJvb3RBbGJ1bUNvbnRhaW5lciA9IGFsYnVtQ29udGFpbmVyO1xuICAgICAgICB0aGlzLmNvbGxlY3Rpb24gPSBuZXcgQWxidW1zQ29sbGVjdGlvbigpO1xuICAgICAgICB0aGlzLmFsYnVtVmlldyA9IG5ldyBBbGJ1bXNWaWV3KFxuXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMuYWxidW1WaWV3LmFwcGVuZFRvKHRoaXMuIyRyb290QWxidW1Db250YWluZXIpO1xuXG4gICAgfVxuXG4gICAgcmVuZGVyTGlzdCgpIHtcbiAgICAgICAgdGhpcy5hbGJ1bVZpZXcucmVuZGVySW1nTGlzdCh0aGlzLmNvbGxlY3Rpb24uZ2V0TGlzdCgpKTtcbiAgICB9XG5cbiAgICBsb2FkQWxidW1CeUlkKGlkKXtcbiAgICAgICAgdGhpcy5jb2xsZWN0aW9uLmZldGNoKGlkKS50aGVuKCgpID0+IHRoaXMucmVuZGVyTGlzdCgpKVxuICAgIH1cbn1cbiJdfQ==